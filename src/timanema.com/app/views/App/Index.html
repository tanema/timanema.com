{{append . "moreScripts" "js/signature.js"}}
{{append . "moreScripts" "js/random_word.js"}}

{{set . "title" "Home"}}
{{template "header.html" .}}

<div id="sidebar">
  <h1>Tim Anema</h1>
  <div class="subline">Always learning.</div>

  <table class="my_card">
    <tr>
      <td colspan="2"><img class="profile" src="https://secure.gravatar.com/avatar/0f92713dcfdd83cd560bc9cb4c9eeb6d?s=200"></td>
    </tr>
    <tr>
      <td><div class="email icon"></div></td>
      <td><a href="mailto:timanema@gmail.com">timanema@gmail.com</a></td>
    </tr>
    <tr>
      <td><div class="twitter icon"></div></td>
      <td><a href="https://twitter.com/timanema">@timanema</a></td>
    </tr>
    <tr>
      <td><div class="linkedin icon"></div></td>
      <td><a href="http://ca.linkedin.com/in/timanema">Tim Anema</a></td>
    </tr>
    <tr>
      <td><div class="github icon"></div></td>
      <td><a href="https://github.com/tanema">tanema</a></td>
    </tr>
    <tr>
      <td><div class="coderwall icon"></div></td>
      <td>
        <div id="coderwall_badges">
            <script type="text/javascript" src="http://coderwall-widget.appspot.com/coderwallbadges.js/tanema"></script>
            <script> new CoderwallWidget({ 'color':'black', 'backgroundColor':'white', 'width':123, 'height':40 }); </script>
        </div>
      </td>
    </tr>
  </table>
</div>

<div id="signature">
  <form id="signature_form" action="/signatures" method="POST">
    <div class="canvas_controls">
      <div id="clear_signature"></div>
      <div class="change_color" data-color= "white" style="background-color:white;"></div>
      <div class="change_color" data-color= "black" style="background-color:black;"></div>
      <div class="change_color" data-color= "red" style="background-color:red;"></div>
      <div class="change_color" data-color= "yellow" style="background-color:yellow;"></div>
      <div class="change_color" data-color= "green" style="background-color:green;"></div>
      <div class="change_color" data-color= "purple" style="background-color:purple;"></div>
      <div class="change_color" data-color= "brown" style="background-color:brown;"></div>
    </div>
    <div class="word_controls">
      <span data-word="true">{{.signature.Word}}</span>
      {{with $field := field "signature.Word" .}}
        <input type="hidden" data-word="true" id="{{$field.Id}}" name="{{$field.Name}}" value="{{$field.Value}}">
      {{end}}
      <a href="#"id="new_word" class="btn">New Word</a>
    </div>
    <canvas id="draw_something" width="325" height="400"></canvas>
    {{with $field := field "signature.Png" .}}
      <input type="hidden" data-behaviour="canvas_save" id="{{$field.Id}}" name="{{$field.Name}}" value="{{$field.Value}}">
    {{end}}
    <div class="sig_inputs">
      {{range .errors}}
        <p style="color:#c00">
          {{.Message}}
        </p>
      {{end}}
      {{with $field := field "signature.Name" .}}
        <input type="text" id="{{$field.Id}}" name="{{$field.Name}}" value="{{$field.Value}}" placeholder="Name"><br/>
      {{end}}
      {{with $field := field "signature.Email" .}}
        <input type="email" id="{{$field.Id}}" name="{{$field.Name}}" value="{{$field.Value}}" placeholder="Email"></br>
      {{end}}
      {{with $field := field "signature.Comment" .}}
        <textarea id="{{$field.Id}}" name="{{$field.Name}}" value="{{$field.Value}}" placeholder="Comment"></textarea></br>
      {{end}}
      <input type="submit" value="I'm Done!" class="btn btn-primary">
    </div>
  </form>
  <script>
    $("#new_word").on("click", function(){window.new_word();});
    $("#clear_signature").on("click", function(){$("canvas").trigger("clear")})
    $(".change_color").on("click", function(){ $("canvas").trigger("change_color", $(this).data("color")) });
    $("canvas").signature("{{.signature.Png}}");
  </script>
</div>

{{range .signatures}}
  <img src="{{.Png}}">
{{end}}

{{template "footer.html" .}}
